import{ref as t,reactive as e,computed as i,toRef as n,readonly as o}from"@vue/reactivity";import{watch as a}from"@vue/runtime-core";let r=[];window.addEventListener("resize",(function(t){r.forEach((e=>e(t)))}));const s=Promise.resolve();function l(t){return s.then(t)}function c(t){return"string"==typeof t?document.querySelector(t):t}function h(t,e){if(!e)return{...t};const i={};for(const n in{...t,...e}){const o=e[n],a=t[n];m(o)?i[n]=a:i[n]=o,"object"!=typeof o||o instanceof HTMLElement||Array.isArray(o)||(i[n]=h(a,o))}return i}function m(t){return null==t}function u(t,e,i){return m(i)?t&&e:t?e:i}function d(t,e){if(t)throw Error(e)}function p(t,e){t&&console.warn(e)}const g=(t,e,i)=>{if("object"!=typeof e)t.style[e]=i;else{Object.keys(e).forEach((i=>{t.style[i]=e[i]}))}};function f(t,e,...i){e?e(t,...i):t()}function v(t,...e){t.append(...e)}function b(t,e){t.className.indexOf(` ${e} `)>-1||(t.className+=` ${e} `)}function P(t,e=new WeakMap){if("object"!=typeof t)return t;if(e.has(t))return e.get(t);const i={};for(const e in t)"object"!=typeof t||m(t[e])?Array.isArray(t[e])?i[e]=[...t[e]]:m(t[e])?i[e]=null:t[e]instanceof Date?i[e]=new Date(t[e]):t[e]instanceof RegExp?i[e]=new RegExp(t[e]):"symbol"==typeof t[e]?i[e]=Symbol(t[e].description):i[e]=t[e]:i[e]=P(t[e]);return e.set(t,i),i}function y(t){const e={};for(const i in t)e[i]=t[i]+"px";return e}const x="magic_drag";function w(t){return` ${x}-${t}`}const S={OutlinePoint:w("outline_point"),ContainerClassName:w("menu_container"),ItemClassName:w("menu_item"),LockItemClassName:w("menu_item-lock"),LockTargetClassName:w("target-lock")};var T;function C(t,e){return t-Number(e.dataset.index)}!function(t){t[t.Normal=55555]="Normal",t[t.Checked=77777]="Checked",t[t.Locked=44444]="Locked",t[t.Uppermost=66666]="Uppermost",t[t.Lowest=33333]="Lowest"}(T||(T={}));class E{constructor(){this.elementStates=[],this.selectedElement=null,this.selectedState=null,this.subscriptions={}}registerElementState(t,e,i=!0){this.elementStates.push({element:t,state:e}),i&&this.setCurrentElement(t)}getElementState(t){const e=this.elementStates.find((e=>e.element===t));if(!e)throw Error("元素未注册");return e?e.state:null}updateElementState(t,e){const i=this.elementStates.find((e=>e.element===t));i&&(i.state=e,this.notifySubscribers(t,e))}get targetState(){return this.currentState.targetState}get currentElement(){return this.selectedElement}get currentState(){return this.selectedState}get size(){return this.elementStates.length}get notLockState(){return this.elementStates.filter((t=>!t.state.globalDataParameter.initialTarget.isLock)).filter((t=>t.state.elementParameter.privateTarget!==this.currentElement)).map((t=>({target:t.element,zIndex:t.state.globalDataParameter.initialTarget.zIndex})))}setCurrentElement(t){this.selectedElement=t,this.selectedState=this.getElementState(t),this.updatePublicTargetState(),this.notifySubscribers(this.selectedElement,this.selectedState)}updatePublicTargetState(){E.COORDINATE_KEY.forEach((t=>{this.currentState.stateParameter.targetState[t]=this.currentState.globalDataParameter.initialTarget[t]}))}updatePublicPointState(){E.COORDINATE_KEY.forEach((t=>{}))}subscribe(t,e){this.subscriptions[t]||(this.subscriptions[t]=[]),this.subscriptions[t].push(e)}unsubscribe(t,e){this.subscriptions[t]&&(this.subscriptions[t]=this.subscriptions[t].filter((t=>t!==e)))}notifySubscribers(t,e){const i=this.subscriptions.selection;i&&i.forEach((i=>i(t,e)))}get containerLeft(){return this.currentState?.globalDataParameter?.containerInfo?.offsetLeft||0}get containerTop(){return this.currentState?.globalDataParameter?.containerInfo?.offsetTop||0}}E.COORDINATE_KEY=["left","top","width","height"];const D=new E;class k{constructor(){this._plugins=new Map}get plugins(){return new Map(this._plugins)}registerPlugin(t,e){this._plugins.set(t,e)}installPlugin(){this.plugins.forEach((t=>{t.init()}))}uninstallPlugin(t){this.plugins.forEach((t=>{t.unbind()}))}callExtensionPoint(t,...e){this.plugins.forEach((i=>{"function"==typeof i[t]&&i[t](...e)}))}}function L(t){t.show=function(t){t&&(this.style.width=t.width+"px",this.style.height=t.height+"px",this.style.left=t.left+"px",this.style.top=t.top+"px"),this.style.display="block"},t.hide=function(){this.style.display="none"},t.isShow=function(){return"none"!==this.style.display}}const I={gap:3,showRefLine:!0,adsorb:!0,showDistance:!0,showShadow:!0};class R{constructor(t=I){this.options=t,this.lines={xt:null,xc:null,xb:null,yl:null,yc:null,yr:null},this.tipEls={X:null,Y:null},this.isHasAdsorbElementY=!1,this.isHasAdsorbElementX=!1,this.isCenterX=!1,this.isCenterY=!1,this.name="refLine",this.options=h(I,this.options)}init(){this.createLines(),this.createTipEl(),this.rectManager=new M(this.options)}createLines(){for(const t in this.lines){const e=this.lines[t]=document.createElement("div");e.classList.add("ref-line",t),e.style.cssText="display:none;opacity:0.7;position:absolute;background:#4DAEFF;\n\t\t\t\tz-index: 99999;"+("x"===t[0]?"width:100%;height:1px;left:0;":"width:1px;height:100%;top:0;"),L(e),document.body.appendChild(e)}}createTipEl(){for(const t in this.tipEls){const e=document.createElement("div");e.style.cssText="position: absolute;padding: 2px 5px;font-size: 12px;background: #0086FF;\n\t\t\t\tz-index: 20001106;border-radius: 7px;width: 34px;height: 18px;color: #fff;\n\t\t\t\ttext-align: center;line-height: 14px;display: none;box-sizing: border-box;",L(e),document.body.appendChild(e),this.tipEls[t]=e}}unbind(){for(const t in this.lines)this.lines[t].remove();this.lines=null}drag({elementParameter:t,stateParameter:e,globalDataParameter:i,optionParameter:n},{movement:o,_updateContourPointPosition:a,_updateState:r}){this.startCheck({elementParameter:t},"drag",(({top:t,left:e})=>{o.x-=e,o.y-=t,a(o),r(o)}))}resize({elementParameter:t},{movementX:e,movementY:i,_updateTargetStyle:n,_updatePointPosition:o}){this.startCheck({elementParameter:t},"resize",(({top:t,left:a})=>{e.value-=a,i.value-=t,n({movementX:e,movementY:i}),o({movementX:e,movementY:i})}))}targetPressChange(t,e){t?this.startCheck({elementParameter:e},"drag"):this.checkEnd()}pointPressChange(t,e){t?this.startCheck({elementParameter:e},"drag"):this.checkEnd()}startCheck({elementParameter:t},e,i){const n=this;this.rectManager.setElement(t.allTarget,t.privateTarget);const o=this.rectManager.excludeDragRect(t.privateTarget);this.checkEnd(),Array.from(o).forEach((i=>{i!==t.privateTarget&&(n.buildConditions(i),n.executeCheckByConditions({way:e,anotherRect:i,dragRect:n.rectManager.selectedRect,conditions:n.rectManager.compareConditions}))})),this.options.showRefLine&&this.executeShowRefLine(),this.options.adsorb&&this.executeAdsorb({way:e,adsorbCallback:i}),this.options.showDistance&&(n.calculateDistance(),n.executeShowDistanceTip())}calculateDistance(){for(const e in this.rectManager.showSituation){const i=(t=this.rectManager.showSituation[e],[...t].find((t=>t.isCenter))||[...t][0]),n=this.rectManager.sizeDescribe(this.rectManager.selectedRect.el);this.rectManager.calculateDistance(e,n,i.anotherRect,i)}var t}executeShowDistanceTip(){for(const e in this.rectManager.tipDistance)t(this.rectManager.tipDistance[e].value,this.options.gap)&&this.tipEls[e].show(this.rectManager.tipDistance[e].position),t(this.rectManager.tipDistance[e].value,this.options.gap)&&(this.tipEls[e].innerText=this.rectManager.tipDistance[e].value);function t(t,e){return t>e}}buildConditions(t){this.rectManager.buildCompareConditions(t,this.lines)}executeCheckByConditions({conditions:t,way:e,dragRect:i,anotherRect:n}){for(let o in t)t[o].forEach((t=>{t.isNearly&&("drag"===e?(!this.isHasAdsorbElementY&&"left"===o||this.isHasAdsorbElementX,this.rectManager.appendCondition(t,o,n)):"resize"===e&&(!t.isCenter&&this.rectManager.appendCondition(t,o,n),(t.isCenter&&"top"===o&&this.rectManager._isNearly(n.height,i.height)||t.isCenter&&"left"===o&&this.rectManager._isNearly(n.width,i.width))&&this.rectManager.appendCondition(t,o,n)),"top"===o?(this.isHasAdsorbElementX=!0,this.isCenterX=this.isCenterX||t.isCenter):(this.isHasAdsorbElementY=!0,this.isCenterY=this.isCenterY||t.isCenter))}))}executeShowRefLine(){for(const t in this.rectManager.showSituation)[...this.rectManager.showSituation[t]].forEach((t=>t.lineNode.show(t.position)))}executeAdsorb({way:t,adsorbCallback:e}){let i=Array.from(this.rectManager.showSituation.top||[]),n=Array.from(this.rectManager.showSituation.left||[]);function o(t,e){return t.map((t=>Math.abs(t.distance)<=e?t.distance:0)).find((t=>Math.abs(t)>0))}"resize"===t&&(this.isHasAdsorbElementY&&this.isCenterY&&(n=n.filter((t=>!t.isCenter))),this.isHasAdsorbElementX&&this.isCenterX&&(i=i.filter((t=>!t.isCenter)))),(this.isHasAdsorbElementY||this.isHasAdsorbElementX)&&e?.({top:o(i,this.options.gap)||0,left:o(n,this.options.gap)||0})}checkEnd(){this.hideRefLine(),this.hideTip(),this.rectManager.resetSituation(),this.rectManager.resetTipDistance()}hideRefLine(){this.isHasAdsorbElementX=!1,this.isHasAdsorbElementY=!1,this.isCenterX=!1,this.isCenterY=!1,Object.values(this.lines).forEach((t=>t.hide()))}hideTip(){for(const t in this.tipEls)this.tipEls[t].hide()}}class M{constructor(t){this.options=t,this._domRects=[],this._showSituation={},this._tipDistance={}}setElement(t,e){this._domRects=t.map((t=>this.sizeDescribe(t))),this._selectedRect=this.sizeDescribe(e)}sizeDescribe(t){const e=t.getBoundingClientRect();return{width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,bottom:e.bottom,el:t,halfHeight:e.height/2,halfWidth:e.width/2}}excludeDragRect(t){return this._domRects.filter((e=>e.el!==t))}getNearlyRect(t,e){const i=this,n=[];return this.excludeDragRect(this.selectedRect.el).forEach((o=>{("top"===t&&function(t,e){const n=i._isNearly(t.top,e),o=i._isNearly(t.bottom,e),a=i._isNearly(t.top+t.halfHeight,e);return a||o||n}(o,e)||"left"===t&&function(t,e){const n=i._isNearly(t.left,e),o=i._isNearly(t.right,e),a=i._isNearly(t.left+t.halfWidth,e);return o||a||n}(o,e))&&n.push(o)})),n}getRefLineCoordinate({otherRects:t,dragRect:e},{direction:i,directionValue:n}){const o={},{leftList:a,topList:r,rightList:s,bottomList:l}=function(t){const e=[],i=[],n=[],o=[];return t.forEach((t=>{e.push(t.left),i.push(t.top),n.push(t.right),o.push(t.bottom)})),{leftList:e,topList:i,rightList:n,bottomList:o}}(t);if("top"===i){const{max:t,min:i}=c(...a,...s,e.left,e.right);o.width=t-i,o.height=1,o.left=Math.min(...a,e.left),o.top=n}else{const{max:t,min:i}=c(...r,...l,e.top,e.bottom);o.width=1,o.height=t-i,o.left=n,o.top=Math.min(...r,e.top)}return o;function c(...t){return{min:Math.min(...t),max:Math.max(...t)}}}appendCondition(t,e,i){this._showSituation[e]||(this._showSituation[e]=new Set);const n=this,o=function(t,e,i){const o={};return o.lineValue=t.lineValue,o.anotherRect=i,o.lineNode=t.lineNode,o.nearlyRect=n.getNearlyRect(e,t.lineValue),o.isCenter=t.isCenter,o.distance=t.distance,o.position=n.getRefLineCoordinate({otherRects:o.nearlyRect,dragRect:n.selectedRect},{direction:e,directionValue:t.lineValue}),o}(t,e,i);this._showSituation[e].add(o)}calculateDistance(t,e,i,n){const o={value:0,position:{left:0,top:0}};"left"===t&&function(){e.bottom<i.top&&(o.value=i.top-e.bottom,o.position.top=e.bottom+o.value/2-9,o.position.left=n.lineValue-17);e.top>i.bottom&&(o.value=e.top-i.bottom,o.position.top=i.bottom+o.value/2-9,o.position.left=n.lineValue-17)}(),"top"===t&&function(){e.right<i.left&&(o.value=i.left-e.right,o.position.left=e.right+o.value/2-17,o.position.top=n.lineValue-9);e.left>i.right&&(o.value=e.left-i.right,o.position.left=i.right+o.value/2-17,o.position.top=n.lineValue-9)}(),this._tipDistance[function(t){return"left"===t?"Y":"X"}(t)]=o}isIntersect(t,e,i){const n={};return"left"===t&&(e.top>i.top&&e.top<i.bottom&&(n.dragRectIsBelow=!0),e.top<i.top&&e.bottom>i.top&&(n.dragRectOnTop=!0),e.top>i.top&&e.bottom<i.bottom&&(n.dragRectIsIncluded=!0),e.top<i.top&&e.bottom>i.bottom&&(n.anotherRectIsIncluded=!0)),n}resetSituation(){this._showSituation={}}resetTipDistance(){this._tipDistance={}}get selectedRect(){return{...this._selectedRect}}get rectList(){return this._domRects.slice()}get showSituation(){return{...this._showSituation}}get compareConditions(){return{...this._compareConditions}}get tipDistance(){return{...this._tipDistance}}buildCompareConditions(t,e){const{halfWidth:i,halfHeight:n}=this.selectedRect,{top:o,height:a,bottom:r,left:s,width:l,right:c,halfHeight:h,halfWidth:m}=t;this._compareConditions={top:[{isNearly:this._isNearly(this.selectedRect.top,o),lineNode:e.xt,lineValue:o,dragValue:o,distance:this.selectedRect.top-o,equality:a===this.selectedRect.height},{isNearly:this._isNearly(this.selectedRect.bottom,o),lineNode:e.xt,lineValue:o,dragValue:o-this.selectedRect.height,distance:this.selectedRect.bottom-o,equality:a===this.selectedRect.height},{isNearly:this._isNearly(this.selectedRect.top+n,o+h),lineNode:e.xc,lineValue:o+h,dragValue:o+h-n,distance:this.selectedRect.top+n-(o+h),equality:a===this.selectedRect.height,isCenter:!0},{isNearly:this._isNearly(this.selectedRect.bottom,r),lineNode:e.xb,lineValue:r,dragValue:r-this.selectedRect.height,distance:this.selectedRect.bottom-r,equality:a===this.selectedRect.height},{isNearly:this._isNearly(this.selectedRect.top,r),lineNode:e.xb,lineValue:r,dragValue:r,distance:this.selectedRect.top-r,equality:a===this.selectedRect.height}],left:[{isNearly:this._isNearly(this.selectedRect.left,s),lineNode:e.yl,lineValue:s,dragValue:s,distance:this.selectedRect.left-s,equality:l===this.selectedRect.width},{isNearly:this._isNearly(this.selectedRect.right,s),lineNode:e.yl,lineValue:s,dragValue:s-this.selectedRect.width,distance:this.selectedRect.right-s,equality:l===this.selectedRect.width},{isNearly:this._isNearly(this.selectedRect.left+i,s+m),lineNode:e.yc,lineValue:s+m,dragValue:s+m-i,distance:this.selectedRect.left+i-(s+m),equality:l===this.selectedRect.width,isCenter:!0},{isNearly:this._isNearly(this.selectedRect.right,c),lineNode:e.yr,lineValue:c,dragValue:c-this.selectedRect.width,distance:this.selectedRect.right-c,equality:l===this.selectedRect.width},{isNearly:this._isNearly(this.selectedRect.left,c),lineNode:e.yr,lineValue:c,dragValue:c,distance:this.selectedRect.left-c,equality:l===this.selectedRect.width}]}}_isNearly(t,e,i=!1){return i?t===e:Math.abs(t-e)<=this.options.gap}}const z={"ctrl + a":t=>{t.preventDefault(),console.log("全选")},"ctrl + c":t=>{t.preventDefault(),console.log("复制")},"ctrl + v":t=>{t.preventDefault(),console.log("粘贴")},"ctrl + h":t=>{t.preventDefault(),console.log("帮助")},"ctrl + z":t=>{t.preventDefault(),console.log("撤销")},"ctrl + y":t=>{t.preventDefault(),console.log("重做")}};class Y{constructor(){this.enableMap={},this.shortcuts={},this.name="keymap",this.bindTriggerShortcut=this.triggerShortcut.bind(this),this.configureShortcuts(z)}init(){window.addEventListener("keydown",this.bindTriggerShortcut)}unbind(){window.removeEventListener("keydown",this.bindTriggerShortcut)}registerShortcut(t,e,i){t=t.replaceAll(" ","").toUpperCase(),t=this.functionOrder(t),console.log(t,"shortcut"),this.enableMap[t]=this.enableMap[t]??!0;const{priority:n=0}=i||{};this.shortcuts[t]||(this.shortcuts[t]=[]),this.shortcuts[t].push({action:e,priority:n}),this.shortcuts[t].sort(((t,e)=>e.priority-t.priority))}functionOrder(t){if(t.indexOf("++")>-1)throw Error("+ 不可以做为快捷键操作的key，如有必要请自行实现");const e=[];return t.indexOf(Y.CTRL)>-1&&e.push(Y.CTRL),(t=t.replace(Y.CTRL,"")).indexOf(Y.SHIFT)>-1&&e.push(Y.SHIFT),(t=t.replace(Y.SHIFT,"")).indexOf(Y.ALT)>-1&&e.push(Y.ALT),t=(t=t.replace(Y.ALT,"")).replaceAll("+",""),e.push(t),e.join("+")}triggerShortcut(t){const e=this.getDescribeFromEvent(t);this.shortcuts[e]&&this.shortcuts[e].forEach((e=>e.action(t)))}getDescribeFromEvent(t){const e=[];return t.ctrlKey&&e.push(Y.CTRL),t.shiftKey&&e.push(Y.SHIFT),t.altKey&&e.push(Y.ALT),e.push(t.key.toUpperCase()),e.join("+")}configureShortcuts(t){for(const e in t)this.registerShortcut(e,t[e])}enableShortcut(t){}disableShortcut(t){}}Y.CTRL="CTRL",Y.SHIFT="SHIFT",Y.ALT="ALT";const X=new k;function N(a,r,s={}){const{limitDirection:h,throttleTime:m=10,offsetLeft:u=0,offsetTop:d=0}=s;let g;p(m>=100,"the throttleTime is greater than 100 and the visual effects may not be smooth"),l((function(){g=c(a),t=g,"absolute"===getComputedStyle(t).position||(t.style.position="absolute"),g.addEventListener("mousedown",C);var t}));const v=t(!1),b=e({x:0,y:0}),P=e({x:0,y:0}),y=e({x:0,y:0}),x=function(t,e,i={}){let{leading:n=!1}=i,o=!0;return(...i)=>{o&&(n&&(t(...i),n=!1),o=!1,setTimeout((()=>{t(...i),o=!0}),e))}}((function(t){if(!v.value)return;f((function(){t.preventDefault(),"X"!==h&&k({x:t.pageX-b.x}),"Y"!==h&&k({y:t.pageY-b.y}),P.x+y.x<u&&k({x:u-P.x}),P.y+y.y<d&&k({y:d-P.y}),E()}),r,w)}),10,{leading:!0}),w=(S=E,new Proxy(y,{get:(t,e,i)=>t[e],set:(t,e,i,n)=>(t[e]=i,S(),!0)}));var S;function T(){D(!1)}function C(t){t.preventDefault(),D(!0),k({x:0,y:0}),function({x:t,y:e}){P.x=t,P.y=e}({x:g.offsetLeft,y:g.offsetTop}),function({x:t,y:e}){b.x=t,b.y=e}({x:t.pageX,y:t.pageY}),window.addEventListener("mousemove",x),window.addEventListener("mouseup",T)}return{mouseX:i((()=>b.x-P.x)),mouseY:i((()=>b.y-P.y)),left:n(P,"x"),top:n(P,"y"),movementX:n(w,"x"),movementY:n(w,"y"),isPress:o(v),destroy:function(){g.removeEventListener("mousedown",C),window.removeEventListener("mousedown",x),window.removeEventListener("mouseup",T),g=null}};function E(){g.style.left=P.x+y.x+"px",g.style.top=P.y+y.y+"px"}function D(t){v.value=t}function k({x:t,y:e}){y.x=t??y.x,y.y=e??y.y}}const _={isInsertAction:!1,menuBox:null,actionElementList:[],isLock:!1,actions:null,currentTarget:null,classCopyPrefix:"box_copy_",copyIndex:0};function H(t,e){return{x:t.width*e,y:t.height*e}}const W={lock:{name:"lock",actionName:"锁定",actionDom:null,actionCallback(t){const{stateParameter:e,elementParameter:i,globalDataParameter:{initialTarget:n}}=t.currentState,{options:{lockTargetClassName:o}}=this.getMenuContextParameter();e.targetState.isLock=!n.isLock,n.isLock=!n.isLock,function(t,e,i){var n,o;e?(b(t,i),g(t,"zIndex",C(T.Locked,t))):(o=i,(n=t).className=n.className.replaceAll(o,""),g(t,"zIndex",C(T.Checked,t)))}(i.privateTarget,n.isLock,o),Q(i.pointElements,!1)},dragCallbacks:{beforeCallback:t=>!t.isLock,afterCallback:t=>!t.isLock},resizeCallbacks:{beforeCallback:t=>!t.isLock,afterCallback:t=>!t.isLock},mousedownCallbacks:{beforeCallback:t=>!t.isLock}},blowUp:{name:"blowUp",actionName:"放大",actionDom:null,actionCallback(t){const{stateParameter:{targetState:e,pointState:i},globalDataParameter:{initialTarget:n},elementParameter:{pointElements:o,privateTarget:a}}=t.currentState;if(n.isLock)return;const r=H({width:n.originWidth,height:n.originHeight},.1);e.width+=r.x,e.height+=r.y,it(a,{direction:"rb",movementX:{value:r.x},movementY:{value:r.y}},{initialTarget:n,pointElements:o,pointSize:10,pointState:i},{excludeCurPoint:!1}),n.width+=r.x,n.height+=r.y,a.style.width=n.width+"px",a.style.height=n.height+"px"}},reduce:{name:"reduce",actionName:"缩小",actionDom:null,actionCallback(t){const{stateParameter:{targetState:e,pointState:i},globalDataParameter:{initialTarget:n},elementParameter:{pointElements:o,privateTarget:a},optionParameter:{pointSize:r}}=t.currentState;if(n.isLock)return;const s=H({width:n.originWidth,height:n.originHeight},.1);e.width-=s.x,e.height-=s.y,it(a,{direction:"rb",movementX:{value:-s.x},movementY:{value:-s.y}},{initialTarget:n,pointElements:o,pointSize:r,pointState:i},{excludeCurPoint:!1}),n.width-=s.x,n.height-=s.y,a.style.width=n.width+"px",a.style.height=n.height+"px"}},copy:{name:"copy",actionName:"复制",actionDom:null,actionCallback(t){const{globalDataParameter:{initialTarget:e,plugins:i},elementParameter:{privateTarget:n},optionParameter:{containerSelector:o}}=t.currentState;if(e.isLock)return;const{actionList:a,options:r}=this.getMenuContextParameter(),s=n.parentNode,l=n.cloneNode(),c=_.classCopyPrefix+_.copyIndex++;l.className=c,l.style.width=n.offsetWidth+"px",l.style.height=n.offsetHeight+"px",l.style.left=e.left+r.offsetX+"px",l.style.top=e.top+r.offsetY+"px",s.appendChild(l)}},delete:{name:"delete",actionName:"删除",actionDom:null,actionCallback(t){const{elementParameter:{privateTarget:e,pointElements:i},globalDataParameter:{initialTarget:n}}=t.currentState;n.isLock||(Q(i,!1),e.remove())}},rotate:{name:"rotate",actionName:"旋转",actionDom:null,actionCallback(t){const{elementParameter:{privateTarget:e,pointElements:i},globalDataParameter:{initialTarget:n,downPointPosition:o}}=t.currentState;n.rotate=45,e.style.transform="rotate(45deg)",function({initialTarget:t,downPointPosition:e},{pointElements:i},{rotate:n,updateStyle:o=!1}){const a=function({width:t,height:e,left:i,top:n},o){const a={};for(const i in o)a[i]=F[i](o.lt,{width:t,height:e});return a}(t,e),r=n*Math.PI/180;for(const e in a)a[e]=O(a[e],r,t),o&&g(i[e],{left:a[e][0],top:a[e][1]})}({initialTarget:n,downPointPosition:o},{pointElements:i},{rotate:45,updateStyle:!0})}},uppermost:{name:"uppermost",actionName:"置顶",actionDom:null,customData:{index:0},actionCallback(t){const{elementParameter:{privateTarget:e},globalDataParameter:{initialTarget:i}}=t.currentState;g(e,"zIndex",C(T.Uppermost,e)+ ++this.customData.index),i.zIndex=T.Uppermost+this.customData.index},mousedownCallbacks:{}},lowest:{name:"lowest",actionName:"置底",actionDom:null,customData:{index:0},actionCallback(t){const{elementParameter:{privateTarget:e},globalDataParameter:{initialTarget:i}}=t.currentState;g(e,"zIndex",C(T.Lowest,e)-++this.customData.index),i.zIndex=T.Lowest-this.customData.index},mousedownCallbacks:{afterCallback(t,e){e.currentState;const i=e.notLockState;for(const t of i)g(t.target,"zIndex",t.zIndex||C(T.Normal,t.target))}}}};function A(t){const e=[];for(const[i,n]of Object.entries(W))e.push({name:n.name,actions:n[t]});return e}function V(t,e,i){const n=e.currentState.globalDataParameter.initialTarget;let o=!0;try{for(let a=0;a<t.length;a++){const r=t[a];if(o=r?.actions?.[i]?.(n,e)??!0,!1===o)break}}catch(t){return console.log(t,"----错误---"),!1}return o}function O(t,e,{width:i,height:n,left:o,top:a}){const r=i/2+o,s=n/2+a,l=t[0]-r,c=t[1]-s;return[l*Math.cos(e)-c*Math.sin(e)+r,l*Math.sin(e)+c*Math.cos(e)+s]}const F={lt:([t,e],{width:i,height:n})=>[t,e],rt:([t,e],{width:i,height:n})=>[t+i,e],lb:([t,e],{width:i,height:n})=>[t,e+n],rb:([t,e],{width:i,height:n})=>[t+i,e+n],l:([t,e],{width:i,height:n})=>[t,e+n/2],t:([t,e],{width:i,height:n})=>[t+i/2,e],r:([t,e],{width:i,height:n})=>[t+i,e+n/2],b:([t,e],{width:i,height:n})=>[t+i/2,e+n]};A("dragCallbacks"),A("resizeCallbacks");const B=A("mousedownCallbacks"),j=["lt","lb","rt","rb","l","r","t","b"];function $(t){const e=t.indexOf("l")>-1,i=t.indexOf("r")>-1,n=t.indexOf("b")>-1;return{hasL:e,hasR:i,hasT:t.indexOf("t")>-1,hasB:n}}const q={left({movementX:t,limitMinDistanceX:e,limitMaxDistanceX:i}){t.value>e&&(t.value=e),i+t.value<0&&(t.value=-i)},right({movementX:t,limitMinDistanceX:e,limitMaxDistanceX:i}){-t.value>e&&(t.value=-e),t.value>i&&(t.value=i)},top({movementY:t,limitMinDistanceY:e,limitMaxDistanceY:i}){t.value>e&&(t.value=e),i+t.value<0&&(t.value=-i)},bottom({movementY:t,limitMinDistanceY:e,limitMaxDistanceY:i}){-t.value>e&&(t.value=-e),t.value>i&&(t.value=i)}},U={left({movementX:t,initialTarget:e}){t.value+e.left<=0&&(t.value=-e.left)},right({movementX:t,initialTarget:e,containerInfo:i}){t.value+e.left+e.width>=i.width+i.offsetLeft&&(t.value=i.width-e.left-e.width+i.offsetLeft)},top({movementY:t,initialTarget:e}){t.value+e.top<=0&&(t.value=-e.top)},bottom({movementY:t,initialTarget:e,containerInfo:i}){t.value+e.top+e.height>=i.height+i.offsetTop&&(t.value=i.height-e.top-e.height+i.offsetTop)}};function K({minWidth:t,minHeight:e,maxWidth:i,maxHeight:n},{initialTarget:o,containerInfo:a}){const r={};return j.forEach((s=>{r[s]=({movementX:r,movementY:l})=>{const{width:c,height:h}=o,{hasT:m,hasR:u,hasB:d,hasL:p}=$(s),g=c-t,f=h-e,v=i-c,b=n-h;p&&((t,e,i)=>{q.left({movementX:t,limitMinDistanceX:e,limitMaxDistanceX:i}),U.left({movementX:t,initialTarget:o})})(r,g,v),m&&((t,e,i)=>{q.top({movementY:t,limitMinDistanceY:e,limitMaxDistanceY:i}),U.top({movementY:t,initialTarget:o})})(l,f,b),u&&((t,e,i)=>{q.right({movementX:t,limitMinDistanceX:e,limitMaxDistanceX:i}),U.right({movementX:t,initialTarget:o,containerInfo:a})})(r,g,v),d&&((t,e,i)=>{q.bottom({movementY:t,limitMinDistanceY:e,limitMaxDistanceY:i}),U.bottom({movementY:t,initialTarget:o,containerInfo:a})})(l,f,b)}})),r}function G(t,e,i){g(t,"left",e[i][0]+"px"),g(t,"top",e[i][1]+"px")}function J(t,e,i){if("object"==typeof e)for(const i in t)t[i]=e[i]??t[i];else t[e]=i}function Q(t,e){for(const i in t)g(t[i],"display",e?"block":"none")}function Z(t,e,i,n,o){const{globalDataParameter:{initialTarget:a,downPointPosition:r},stateParameter:{pointState:s},optionParameter:{pointSize:l,skill:c},elementParameter:{allContainer:h,target:m,privateTarget:u}}=n.getElementState(t);if([...h,document.body,document.documentElement].includes(o.target)&&(Q(e,!1),u===m.value&&g(m.value,"zIndex",a.zIndex||C(T.Normal,m.value))),o.target!==t)return;a.isLock&&Q(e,!1),n.setCurrentElement(t);if(!1===V(B,n,"beforeCallback"))return;const d=c.resize&&it(t,{direction:"t",movementX:{value:0},movementY:{value:0}},{initialTarget:a,pointElements:e,pointSize:l,pointState:s},{excludeCurPoint:!1,updateDirection:!1});for(const t in d)r[t]=[d[t][0],d[t][1]];Q(e,!0),g(t,"zIndex",C(T.Checked,t)),V(B,n,"afterCallback")}function tt(t,e,i){let n;return(o,a=!0)=>{a?window.addEventListener("mousedown",n??(n=Z.bind(null,o,t,e,i))):window.removeEventListener("mousedown",n)}}function et(t,{direction:e,movementX:i,movementY:n},{targetState:o,initialTarget:a}){const r=function(){const t={};return j.forEach((e=>{const{hasT:i,hasR:n,hasB:o,hasL:a}=$(e);t[e]=({left:t,top:e,height:r,width:s,offsetX:l,offsetY:c})=>({left:u(a,t+l+"px",t+"px"),top:u(i,e+c+"px",e+"px"),width:u(a,s-l+"px",u(n,s+l+"px",s+"px")),height:u(i,r-c+"px",u(o,r+c+"px",r+"px"))})})),t}(),s=r[e]({left:a.left,top:a.top,width:a.width,height:a.height,offsetX:i.value,offsetY:n.value});return function(t,e,i){const{hasL:n,hasT:o}=$(t),{left:a,top:r,width:s,height:l}=function(t){const e={};for(const i in t)e[i]=parseInt(t[i]);return e}(i);J(e,o&&n?{left:a,top:r,width:s,height:l}:o?{top:r,width:s,height:l}:n?{left:a,width:s,height:l}:{width:s,height:l})}(e,o,s),g(t,s),s}function it(t,{direction:e,movementX:i,movementY:n},{initialTarget:o,pointElements:a,pointSize:r,pointState:s},l={}){const{excludeCurPoint:c=!0,updateDirection:h=!0}=l,m=function(){const t={};return j.forEach((e=>{const{hasT:i,hasR:n,hasB:o,hasL:a}=$(e);t[e]=({left:t,top:e,width:r,height:s,movementX:l,movementY:c})=>({left:u(a,t+l.value,t),top:u(i,e+c.value,e),width:u(a,r-l.value,u(n,r+l.value,r)),height:u(i,s-c.value,u(o,s+c.value,s))})})),t}(),d=function({left:t,top:e,width:i,height:n},o){const a=o/2;return{lt:[t-a,e-a,"nw-resize"],lb:[t-a,e+n-a,"ne-resize"],rt:[t+i-a,e-a,"ne-resize"],rb:[t+i-a,e+n-a,"nw-resize"],t:[t+i/2-a,e-a,"n-resize","X"],b:[t+i/2-a,e+n-a,"n-resize","X"],l:[t-a,e+n/2-a,"e-resize","Y"],r:[t+i-a,e+n/2-a,"e-resize","Y"]}}(m[e]({...o,movementX:i,movementY:n}),r);for(const t in d)if(t!==e)G(a[t],d,t);else{J(s,{direction:h?e:null,left:d[t][0],top:d[t][1],movementX:i.value,movementY:n.value})}return c||G(a[e],d,e),d}function nt(t,i){return t&&i&&J(t,i),e({left:0,top:0,width:0,height:0})}class ot{constructor(t=new k,e,i){this.plugins=t,this.stateManager=i,this.start(i.currentState)}start(t){const{pointElements:e,target:i,targetState:n,containerInfo:o,initialTarget:r,downPointPosition:s,drag:l,limitDragDirection:c,dragCallback:h}={target:(m=t).elementParameter.target,container:m.elementParameter.container,privateTarget:m.elementParameter.privateTarget,privateContainer:m.elementParameter.privateContainer,pointElements:m.elementParameter.pointElements,allTarget:m.elementParameter.allTarget,allContainer:m.elementParameter.allContainer,pointState:m.stateParameter.pointState,targetState:m.stateParameter.targetState,initialTarget:m.globalDataParameter.initialTarget,containerInfo:m.globalDataParameter.containerInfo,downPointPosition:m.globalDataParameter.downPointPosition,drag:m.optionParameter.skill.drag,resize:m.optionParameter.skill.resize,limitDragDirection:m.optionParameter.skill.limitDragDirection,dragCallback:m.optionParameter.callbacks.dragCallback,resizeCallback:m.optionParameter.callbacks.resizeCallback,customPointClass:m.optionParameter.customClass.customPointClass,containerSelector:m.optionParameter.containerSelector,minWidth:m.optionParameter.minWidth,minHeight:m.optionParameter.minHeight,maxWidth:m.optionParameter.maxWidth,maxHeight:m.optionParameter.maxHeight,pointSize:m.optionParameter.pointSize};var m;l&&g(i.value,"cursor","all-scroll");const{movementX:u,movementY:d,isPress:p}=N(i.value,this.moveTargetCallback(h,{downPointPosition:s,pointElements:e,targetState:n,containerInfo:o}),{limitDirection:c,offsetLeft:o.offsetLeft,offsetTop:o.offsetTop});a(p,this.isPressChangeCallback({...t.elementParameter},{targetState:n},{downPointPosition:s,initialTarget:r},{movementX:u,movementY:d}))}dragStart(){this.plugins.callExtensionPoint("onDragStart")}moveTargetCallback(t,{downPointPosition:e,pointElements:i,targetState:n,containerInfo:o}){return(a,r)=>{const s=this.stateManager.currentState,l=s.globalDataParameter.initialTarget;function c(t){!function(t,e,i){for(const n in i)g(i[n],"left",t[n][0]+e.x+"px"),g(i[n],"top",t[n][1]+e.y+"px")}(e,t,i)}function h(t){J(n,{left:l.left+t.x,top:l.top+t.y})}f((()=>{a(),this.limitTargetMove(l,o,r),c(r),h(r)}),t,{movementX:r.x,movementY:r.y}),this.plugins.callExtensionPoint("drag",s,{movement:r,_updateContourPointPosition:c,_updateState:h})}}limitTargetMove(t,e,i){const{left:n,top:o,width:a,height:r}=t,{width:s,height:l,offsetLeft:c,offsetTop:h}=e;i.x+n<=0&&(i.x=-n),i.y+o<=0&&(i.y=-o),i.x+n+a>=s+c&&(i.x=s+c-a-n),i.y+o+r>=l+h&&(i.y=l+h-r-o)}targetMouseDown({downPointPosition:t,pointElements:e}){!function({downPointPosition:t,pointElements:e}){for(const i in e)t[i]=[parseInt(e[i].style.left),parseInt(e[i].style.top)]}({downPointPosition:t,pointElements:e})}targetMouseUp({initialTarget:t,movementX:e,movementY:i}){nt(t,{top:t.top+i.value,left:t.left+e.value})}isPressChangeCallback(t,{targetState:e},{downPointPosition:i,initialTarget:n},{movementX:o,movementY:a}){return r=>{J(e,"isPress",r),r?this.targetMouseDown({downPointPosition:i,pointElements:t.pointElements}):this.targetMouseUp({initialTarget:n,movementX:o,movementY:a}),this.plugins.callExtensionPoint("targetPressChange",r,t)}}}const at=A("resizeCallbacks");class rt{constructor(t=new k,e,i){this.plugins=t,this.stateManager=i,this.setPointStyle(),this.init(i.currentState)}init({elementParameter:t,stateParameter:e,globalDataParameter:i,optionParameter:n}){const o=this.createParentPosition(i.initialTarget,n.pointSize);this.initContourPoints(t,e,i,n,{pointPosition:o})}setPointStyle(){const t=document.createElement("style");t.appendChild(document.createTextNode("\n      .magic_drag-outline_point {\n        position: absolute;\n        box-sizing: border-box;\n        border: 1px solid #999;\n        border-radius: 50%;\n        display: none;\n        z-index: 88888;\n      }\n    ")),document.body.appendChild(t)}createParentPosition({left:t,top:e,width:i,height:n},o){const a=o/2;return{lt:[t-a,e-a,"nw-resize"],lb:[t-a,e+n-a,"ne-resize"],rt:[t+i-a,e-a,"ne-resize"],rb:[t+i-a,e+n-a,"nw-resize"],t:[t+i/2-a,e-a,"n-resize","X"],b:[t+i/2-a,e+n-a,"n-resize","X"],l:[t-a,e+n/2-a,"e-resize","Y"],r:[t+i-a,e+n/2-a,"e-resize","Y"]}}initContourPoints(t,e,i,n,o){const{target:r,pointElements:s}=t,{pointState:l}=e,{pointPosition:c}=o,{pointSize:h,customClass:{customPointClass:m}}=n,{initialTarget:u}=i;for(const o in c){const d=this.createContourPoint(s,{direction:o});this.initPointStyle(d,{pointPosition:c,direction:o,pointSize:h}),b(d,m),v(r.value.parentNode,d);const p=this.addDragFunctionToPoint(t,e,i,n,{point:d,pointPosition:c,direction:o});a(p,this.pointIsPressChangeCallback(r.value,{initialTarget:u,pointState:l,direction:o},t))}}pointIsPressChangeCallback(t,{initialTarget:e,pointState:i,direction:n},o){return a=>{const r=this.stateManager.currentElement;var s;t===r&&(i.isPress=a,i.direction=n,a||(i.direction=null,nt(e,{width:(s=t).offsetWidth,height:s.offsetHeight,left:s.offsetLeft,top:s.offsetTop})),this.plugins.callExtensionPoint("pointPressChange",a,o))}}initPointStyle(t,{pointPosition:e,direction:i,pointSize:n},o){o&&g(t,o),g(t,"width",n+"px"),g(t,"height",n+"px"),g(t,"cursor",e[i][2]),G(t,e,i)}addDragFunctionToPoint(t,e,i,n,o){const{target:a}=t,{point:r,pointPosition:s,direction:l}=o,{resizeCallback:c}=n.callbacks||{},{isPress:h,movementX:m,movementY:u}=N(r,(o=>{f((()=>{this.movePointCallback(e,t,i,n,{direction:l,movementX:m,movementY:u,moveAction:o,target:a.value})}),c,l,{movementX:m.value,movementY:u.value})}),{limitDirection:s[l][3]});return h}movePointCallback(t,e,i,n,o){const{moveAction:a,target:r,direction:s,movementX:l,movementY:c}=o,h=this.stateManager.getElementState(r),{globalDataParameter:{initialTarget:m,containerInfo:u},stateParameter:{targetState:d,pointState:p},optionParameter:{minWidth:g,minHeight:f,maxWidth:v,maxHeight:b,pointSize:P},elementParameter:{pointElements:y}}=h;if(!1===V(at,this.stateManager,"beforeCallback"))return;a();const x=({movementX:t,movementY:e})=>{et(r,{direction:s,movementX:t,movementY:e},{targetState:d,initialTarget:m})},w=({movementX:t,movementY:e})=>{it(0,{direction:s,movementX:t,movementY:e},{initialTarget:m,pointElements:y,pointSize:P,pointState:p})};!function(t,{direction:e,movementX:i,movementY:n},{initialTarget:o,containerInfo:a,minWidth:r,minHeight:s,maxWidth:l,maxHeight:c}){K({minWidth:r,minHeight:s,maxWidth:l,maxHeight:c},{initialTarget:o,containerInfo:a})[e]({movementX:i,movementY:n})}(0,{direction:s,movementX:l,movementY:c},{initialTarget:m,containerInfo:u,minWidth:g,minHeight:f,maxWidth:v,maxHeight:b}),x({movementX:l,movementY:c}),w({movementX:l,movementY:c}),this.plugins.callExtensionPoint("resize",h,{movementX:l,movementY:c,_updateTargetStyle:x,_updatePointPosition:w})}createContourPoint(t,{direction:e}){return t[e]||(t[e]=document.createElement("div"))}}const st={containerSelector:"body",minWidth:10,minHeight:10,maxWidth:999999,maxHeight:999999,pointSize:10,initialInfo:{width:200,height:200,left:0,top:0},skill:{resize:!0,drag:!0,refLine:!0,keymap:!1,limitDragDirection:null},customClass:{customPointClass:S.OutlinePoint},callbacks:{}};function lt(){return P(st)}const ct=[],ht=[];let mt=t(null),ut=t(null);function dt(t){!function(t){function e(){return t.left<0||t.top<0}p(e(),"It is not recommended that the initial location information be set to a negative value")}(t.initialInfo),function(t){function e(){return t.initialInfo.height<t.minHeight||t.initialInfo.width<t.minWidth}function i(){return t.initialInfo.height>t.maxHeight||t.initialInfo.width>t.maxWidth}function n(){return t.minWidth>t.maxWidth||t.minHeight>t.maxHeight}d(n(),"The minimum cannot be greater than the maximum"),p(e(),"The initial size cannot be less than the minimum size"),p(i(),"The initial size cannot be greater than the maximum size")}(t)}const{allTarget:pt,allContainer:gt}={allTarget:ct,allContainer:ht};let{$target:ft,$container:vt,initialTarget:bt,pointElements:Pt,containerInfo:yt,downPointPosition:xt}={$target:mt,$container:ut,initialTarget:void 0,pointElements:void 0,containerInfo:void 0,downPointPosition:void 0};const{targetState:wt,pointState:St}={targetState:e({left:0,top:0,height:0,width:0,isPress:!1,isLock:!1}),pointState:e({left:0,top:0,direction:null,isPress:!1,movementX:0,movementY:0})};function Tt(t,e){return t.direction?t[e]:null}var Ct;function Et(t,e,o=!1){const{containerSelector:a}=e;ft.value=null,vt.value=null,bt=nt(),Pt=Pt||{},yt={},xt={},Object.assign(wt,{left:0,top:0,height:0,width:0,isPress:!1,isLock:!1}),Object.assign(St,{left:0,top:0,direction:null,isPress:!1,movementX:0,movementY:0}),"body"===e.containerSelector&&(document.body.style.overflow="hidden");const s={pointState:St,targetState:wt},h={initialTarget:bt,containerInfo:yt,downPointPosition:xt},m={pointElements:Pt,allTarget:pt,allContainer:gt,target:ft,container:vt,privateTarget:null,privateContainer:null},u=tt(m.pointElements,s.targetState,D);return l((function(){dt(e),function(){function t(){const t=D.currentState.globalDataParameter.initialTarget.left;function e(e){return t+D.currentState.globalDataParameter.initialTarget.width>e}function a(t){const e=t-D.currentState.globalDataParameter.initialTarget.width;return e>=0?e:0}function r(){nt(D.currentState.globalDataParameter.initialTarget,{...D.currentState.globalDataParameter.initialTarget,left:a(D.currentState.globalDataParameter.containerInfo.width)}),g(D.currentElement,y(D.currentState.globalDataParameter.initialTarget)),Q(D.currentState.elementParameter.pointElements,!1)}o(i(),n()),e(D.currentState.globalDataParameter.containerInfo.width)&&r()}function e(){m.privateContainer=vt.value=c(a),gt.push(m.privateContainer)}function i(){const{paddingLeft:t,paddingRight:e,paddingTop:i,paddingBottom:n,width:o,height:a,boxSizing:r,borderLeftWidth:s,borderRightWidth:l,borderTopWidth:c,borderBottomWidth:h}=getComputedStyle(m.container.value);return{containerWidth:p(),containerHeight:d()};function u(){return"border-box"===r}function d(){return u()?parseInt(a)-parseInt(i)-parseInt(n)-parseInt(h)-parseInt(c):parseInt(a)}function p(){return u()?parseInt(o)-parseInt(t)-parseInt(e)-parseInt(s)-parseInt(l):parseInt(o)}}function n(){const t=m.container.value.getBoundingClientRect();return{offsetLeft:t.left,offsetTop:t.top}}function o({containerWidth:t,containerHeight:e},{offsetLeft:i,offsetTop:n}){h.containerInfo.width=t,h.containerInfo.height=e,h.containerInfo.offsetLeft=i,h.containerInfo.offsetTop=n}e(),o(i(),n()),s=t,r.push(s);var s}(),function(){function i(){return{position:{left:h.containerInfo.offsetLeft+e.initialInfo.left,top:h.containerInfo.offsetTop+e.initialInfo.top},size:{width:e.initialInfo.width,height:e.initialInfo.height}}}function n(){m.privateTarget=ft.value=c(t),pt.push(ft.value)}function a(){ft.value.addEventListener("mousedown",p),ft.value.dataset.index=pt.length}n(),d(!ft.value,"targetSelector is an invalid selector or HTMLElement"),a(),r=ft.value,l=i().size,u=i().position,g(r,"position","absolute"),g(r,y(u)),[0===r.offsetWidth||0===r.offsetHeight,getComputedStyle(r).position][0]&&g(r,y(l)),function(t,e,i){const n={left:i?parseInt(t.style.left):t.offsetLeft,top:i?parseInt(t.style.top):t.offsetTop,width:i?parseInt(t.style.width):t.offsetWidth,height:i?parseInt(t.style.height):t.offsetHeight};for(const t in e)e[t]=n[t]||e[t]}(ft.value,h.initialTarget,o),J(s.targetState,h.initialTarget);var r,l,u}(),function(t,e,i){D.registerElementState(t,e,i)}(ft.value,f(),!0),e.skill.drag&&new ot(X,f(),D),e.skill.resize&&new rt(X,f(),D),u(ft.value)})),{targetLeft:i((()=>s.targetState.left-D.containerLeft)),targetTop:i((()=>s.targetState.top-D.containerTop)),targetWidth:n(s.targetState,"width"),targetHeight:n(s.targetState,"height"),targetIsPress:n(s.targetState,"isPress"),targetIsLock:n(s.targetState,"isLock"),pointLeft:i((()=>Tt(s.pointState,"left"))),pointTop:i((()=>Tt(s.pointState,"top"))),direction:n(s.pointState,"direction"),pointIsPress:n(s.pointState,"isPress"),pointMovementX:n(s.pointState,"movementX"),pointMovementY:n(s.pointState,"movementY")};function p(t){ft.value=t.target}function f(){return{elementParameter:m,stateParameter:s,globalDataParameter:h,optionParameter:e}}}function Dt(t,e){return d("string"!=typeof t&&!(t instanceof HTMLElement),"targetSelector should be a selector or HTML Element"),function(t,e={}){for(const i in t){const n=e[i];if(m(n))continue;const o=typeof t[i],a=typeof n;d(o!==a,`The type of options.${i} should be ${o}, But the ${a} type is passed in.`)}}(lt(),e),d((e=h(lt(),e)).customClass.customPointClass.startsWith(x),`custom class names cannot start with ${x}, please change your class name`),Et(t,e)}(Ct=lt().skill).refLine&&function(){const t=new R({gap:10});X.registerPlugin(t.name,t)}(),Ct.keymap&&function(){const t=new Y;X.registerPlugin(t.name,t)}(),X.installPlugin();export{Dt as useMagicDrag,N as useMoveElement};
