<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>语音合成声音示例</title>
</head>
<body>
<h1>语音合成声音示例</h1>

<select id="voice-select"></select>
<textarea id="text-input" placeholder="请输入要转换为语音的文本"></textarea>
<button id="speak-btn">朗读</button>

<script>
  var voiceSelect = document.getElementById('voice-select');
  var speakButton = document.getElementById('speak-btn');
  var textInput = document.getElementById('text-input');
  var voices
  // 检查浏览器是否支持SpeechSynthesis API
  if ('speechSynthesis' in window) {
    var synth = window.speechSynthesis;

    // 等待语音合成声音加载完成后触发voiceschanged事件
    synth.onvoiceschanged = function() {
      // 获取可用的语音合成声音
      voices = synth.getVoices();
      console.log(voices)

      // 添加可用声音到下拉选择框
      for (var i = 0; i < voices.length; i++) {
        var option = document.createElement('option');
        option.textContent = voices[i].name + ' (' + voices[i].lang + ')';
        option.value = i;
        voiceSelect.appendChild(option);
      }
    };

    speakButton.addEventListener('click', function() {
      var text = textInput.value;

      // 创建要朗读的语音合成实例
      var utterance = new SpeechSynthesisUtterance(text);

      // 选择用户选择的声音
      var selectedVoiceIndex = voiceSelect.value;
      console.log(voices, 'voices')
      utterance.voice = voices[selectedVoiceIndex];

      // 开始朗读
      synth.speak(utterance);
    });
  } else {
    console.log('抱歉，您的浏览器不支持语音合成API');
  }
</script>
</body>
</html>
